import cv2
import matplotlib.pyplot as plt
import numpy as np

# Load the captured image (assuming 'img_rgb' from previous step is available or re-load)
try:
    # If img_rgb is not in kernel state, re-load the image
    if 'img_rgb' not in locals():
        image_path = '/content/Screenshot 2025-12-17 132610.png' # Using the image path from the previous cell
        img = cv2.imread(image_path)
        if img is None:
            raise FileNotFoundError(f"Image not found at {image_path}")
        img_rgb = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)

    original_height, original_width = img_rgb.shape[:2]

    # --- Rotation --- 
    # Get the center of the image for rotation
    center = (original_width / 2, original_height / 2)

    # Define rotation angles
    angle_clockwise = -90  # -90 degrees for clockwise rotation
    angle_counter_clockwise = 90 # 90 degrees for counter-clockwise rotation

    # Get rotation matrix for clockwise rotation
    rotation_matrix_clockwise = cv2.getRotationMatrix2D(center, angle_clockwise, 1.0)
    # Get rotation matrix for counter-clockwise rotation
    rotation_matrix_counter_clockwise = cv2.getRotationMatrix2D(center, angle_counter_clockwise, 1.0)

    # Perform clockwise rotation
    rotated_image_clockwise = cv2.warpAffine(img_rgb, rotation_matrix_clockwise, (original_width, original_height))
    # Perform counter-clockwise rotation
    rotated_image_counter_clockwise = cv2.warpAffine(img_rgb, rotation_matrix_counter_clockwise, (original_width, original_height))

    # --- Displaying the Images ---
    plt.figure(figsize=(18, 6))

    plt.subplot(1, 3, 1)
    plt.imshow(img_rgb)
    plt.title('Original Image')
    plt.axis('off')

    plt.subplot(1, 3, 2)
    plt.imshow(rotated_image_clockwise)
    plt.title('Rotated Clockwise (90°)')
    plt.axis('off')

    plt.subplot(1, 3, 3)
    plt.imshow(rotated_image_counter_clockwise)
    plt.title('Rotated Counter-Clockwise (90°)')
    plt.axis('off')

    plt.show()

except FileNotFoundError as e:
    print(f"Error: {e}. Please ensure the image file exists.")
except Exception as e:
    print(f"An error occurred: {e}")
